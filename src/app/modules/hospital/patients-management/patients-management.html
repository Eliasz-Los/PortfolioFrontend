<div class="container my-4">

  <div class="card shadow-sm">
    <div class="card-header">
      <div class="d-flex align-items-center w-100">
        <button class="btn btn-info"
              (click)="returnToHospitalDashboard()"
        >
          <i class="bi bi-house-door-fill me-1"></i>
          Dashboard
        </button>

        <h5 class="flex-grow-1 text-center mb-0">Patients</h5>

        <div class="ms-2">
          <button
            class="btn btn-primary"
            (click)="addPatient()"
          >
            <i class="bi bi-plus-lg me-1"></i>
             Patient
          </button>
        </div>
    </div>



    </div>

    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">

        <thead class="table-light">
        <tr>
          <th>Name</th>
          <th>Date of birth</th>
          <th>Email</th>
          <th>Phone</th>
          <th class="text-end">Actions</th>
        </tr>
        </thead>

        <tbody>
          @for (patient of paginatedPatients; track patient.id) {
            <tr
              class="clickable-row"
              (click)="viewPatient(patient.id)"
            >
              <td>
                {{ patient.fullName.firstName }}
                {{ patient.fullName.lastName }}
              </td>

              <td>{{ patient.dateOfBirth }}</td>

              <td>{{ patient.email }}</td>

              <td>{{ patient.phoneNumber }}</td>

              <td class="text-end">
                <button
                  class="btn btn-sm btn-outline-primary"
                  (click)="viewPatient(patient.id); $event.stopPropagation()"
                >
                  <i class="bi bi-eye"></i>
                </button>
              </td>
            </tr>
          }
        </tbody>

      </table>

      <nav class="mt-3">
        <ul class="pagination justify-content-center">

          <li class="page-item" [class.disabled]="currentPage === 1">
            <button
              class="page-link"
              (click)="changePage(currentPage - 1)"
            >
              Previous
            </button>
          </li>

          @for (page of totalPages; track page) {
            <li
              class="page-item"
              [class.active]="page === currentPage"
            >
              <button
                class="page-link"
                (click)="changePage(page)"
              >
                {{ page }}
              </button>
            </li>
          }

          <li
            class="page-item"
            [class.disabled]="currentPage === totalPages.length"
          >
            <button
              class="page-link"
              (click)="changePage(currentPage + 1)"
            >
              Next
            </button>
          </li>

        </ul>
      </nav>


    </div>
  </div>

</div>
