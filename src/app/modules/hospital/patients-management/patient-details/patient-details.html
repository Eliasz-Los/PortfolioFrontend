@if (patient | async; as patient) {
  <div class="container my-4">

    <!-- Back button -->
    <a
      routerLink="/hospital/patients"
      class="btn btn-outline-primary mb-3"
    >
      <i class="bi bi-arrow-left me-1"></i>
      Back to patients
    </a>

    <!-- Patient card -->
    <div class="card shadow-sm">

      <div class="card-header">
        <h4 class="mb-0">
          {{ patient.fullName.firstName }}
          {{ patient.fullName.lastName }}
        </h4>
      </div>

      <div class="card-body">

        <!-- Personal information -->
        <h6 class="text-primary mb-2">Personal information</h6>
        <ul class="list-group list-group-flush mb-4">
          <li class="list-group-item d-flex justify-content-between">
            <span class="fw-semibold">Date of birth</span>
            <span>{{ patient.dateOfBirth }}</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            <span class="fw-semibold">Email</span>
            <span>{{ patient.email }}</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            <span class="fw-semibold">Phone</span>
            <span>{{ patient.phoneNumber }}</span>
          </li>
        </ul>

        <!-- Address -->
        <h6 class="text-primary mb-2">Address</h6>
        <ul class="list-group list-group-flush">
          <li class="list-group-item d-flex justify-content-between">
            <span class="fw-semibold">Street</span>
            <span>{{ patient.location.streetName }}</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            <span class="fw-semibold">City</span>
            <span>{{ patient.location.city }}</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            <span class="fw-semibold">Postal code</span>
            <span>{{ patient.location.postalCode }}</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            <span class="fw-semibold">Country</span>
            <span>{{ patient.location.country }}</span>
          </li>
        </ul>

      </div>

      <div class="card-footer d-flex justify-content-end gap-2">
        <button class="btn btn-outline-primary">
          <i class="bi bi-pencil me-1"></i>
          Edit patient
        </button>
        <button
          class="btn btn-outline-danger"
          (click)="openDeleteModal()"
        >
          <i class="bi bi-trash me-1"></i>
          Delete patient
        </button>
      </div>

    </div>
  </div>

  <app-patient-invoices [patientId]="patientId"></app-patient-invoices>
}

@if (showDeleteModal) {
  <div
    class="modal fade show d-block"
    tabindex="-1"
    role="dialog"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <div class="modal-header">
          <h5 class="modal-title">Confirm deletion</h5>
          <button
            type="button"
            class="btn-close"
            (click)="closeDeleteModal()"
          ></button>
        </div>

        <div class="modal-body">
          <p>Are you sure you want to delete this patient?</p>
          <strong class="text-danger">
            This action cannot be undone.
          </strong>
        </div>

        <div class="modal-footer">
          <button
            class="btn btn-outline-secondary"
            (click)="closeDeleteModal()"
          >
            Cancel
          </button>

          <button
            class="btn btn-danger"
            (click)="confirmDelete()"
          >
            Yes, delete
          </button>
        </div>

      </div>
    </div>
  </div>

}



@if (showDeleteModal){
  <div
    class="modal-backdrop fade show"
  ></div>
}

